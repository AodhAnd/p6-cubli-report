\chapter{Measurements from IMU}\label{IMUMeasurementsAppendix} \fxnote{find appropriate titel}
\textbf{Name: Group 630}\\
\textbf{Date: 15/04 - 2016}

\subsubsection{Purpose}
Analyse the data coming from the IMU, specifically the accelerometer and and the gyroscope measurements and calculating the angle \si{\theta_F} from those measurements.


\subsubsection{Setup}

%\begin{figure}[H]                                   
%	\centering                                        
%	\includegraphics[scale=0.08]{figures/stepResponseSetup}
%	\caption{Picture of the data measurement test}
%	\label{dataMeasurementIMUPicture} 
%\end{figure}              

\subsubsection{List of Equipment}
\begin{table}[H]
	\begin{tabular}{|l|l|p{4.3cm}|}
		\hline%------------------------------------------------------------------------------------
		\textbf{Instrument}                        &  \textbf{AAU-no.}  &  \textbf{Type}       \\
		\hline%------------------------------------------------------------------------------------
		Cubli setup                              &               &  		  \\
		\hline%------------------------------------------------------------------------------------
		Dedicated Power Supply of Cubli \small{(24 V - 3 A)} &               &  XP Power, AEB70US24 \\
		\hline%------------------------------------------------------------------------------------
		PC with the code from simon                &              &            \\
		\hline%------------------------------------------------------------------------------------
	\end{tabular}
\end{table}
\subsubsection{Procedure}
\begin{enumerate}
	%\item Turn on the power supply
	\item Assign a new name to the data file measurements are saved to in the code
	\item Upload the code with Simons controller activated \fxnote{was it sliding mode that was used?}
	\item Start the program and let the cubli balance for a few seconds
	\item Poke the Cubli a few times so there is some random variations in the angle
	\item Take the measurements and plot them in Matlab
	%\item Plot the result of the simulations in the same figure and compare them
\end{enumerate}


\subsubsection{Results}
The measured data is partially converted through the code. Accelerometer and gyro values are given in rad/s. \fxnote{might need changing if we have to redo the conversion, B}
Data from the accelerometer is converted into an angle with arctan and the gyro data is integrated. This is done to see how close to each other the two measurements display the angle of the frame.
The data is available as a .csv file on the CD\fxnote{Make sure this is put into the CD folder for copying}

\small\textbf{Accelerometer data to angle}
\begin{flalign}
	&\si{\theta_{F}=\arctan(\frac{y_1}{x_1})}&
	\label{eq:accelToAngle}
\end{flalign}

\small\textbf{Gyroscope angular velocity to angle}
The integration is done the same way it would be done in the code on the BeagleBone.
\begin{flalign}
	&\si{\theta_{F}[n]=\theta_{F}[n-1]+\omega[n] \cdot \Delta T}&
	\label{eq:gyroToAngle}
\end{flalign}
\si{\Delta T} being the samplingfrequency of the controller.
\subsubsection{Note}



