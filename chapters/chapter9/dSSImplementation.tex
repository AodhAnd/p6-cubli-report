\section{State Space Controller Implementation}\label{sec:SSImplementation}
The controller is state space results to be three gains that do not need to be discretized to implement them in the real system. The important part of the implementation, and in some cases it can give problems, is the measurement of the states that are involved in the feedback.

In the case of the Cubli, there are three states to be measured: the position and the velocity of the frame and the velocity of the wheel.

The first one can be measured using the values from the potentiometer or using built-in sensors like the IMU, as will be explained in detail in \chapref{chap:CompFilter}.

The velocity of the frame is measured using the gyroscopes present in both IMUs, which give an angular velocity value.

Finally, information about the velocity of the wheel is measured with a tachometer attached to the motor and send to the Beaglebone through the motor control board. 
\\
\begin{figure}[H]\vspace{-4mm}
	\centering
	\includegraphics[scale=.75]{figures/measurements}
	\captionof{figure}{Internal states measurements for the implementation of the controller}
	\label{fig:measurements}
\end{figure}\vspace{-5mm}